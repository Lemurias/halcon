\documentclass{beamer}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{animate}
\usepackage{graphicx}
\usepackage{epstopdf}
\usepackage{listings}
\usepackage{caption}
\usepackage{subcaption}
\usepackage[sorting = none]{biblatex}
\usepackage{milstd}
\usepackage{stackengine}
\usepackage{scalerel}
\usepackage{wrapfig}
\usepackage{float}
\newcommand\Bussymbol[1]{%
  \raisebox{-1.1em}{\scalebox{.7}{\stackunder{\BusWidth}{#1}}}%
}

\geometry{paperwidth=16cm,paperheight=9cm}

\epstopdfDeclareGraphicsRule{.gif}{png}{.png}{convert gif:#1 png:\OutputFile}
\AppendGraphicsExtensions{.gif}

\definecolor{inputNodeColor}{RGB}{255, 217, 102}
\definecolor{outputNodeColor}{RGB}{94, 165, 244}
\definecolor{clockNodeColor}{RGB}{255, 137, 137}

\usepackage{tikz}
\usetikzlibrary{shapes,arrows,fit,circuits.ee.IEC,positioning, decorations.pathreplacing, calc, arrows.meta}
\usepackage{verbatim}
\usepackage[siunitx]{circuitikz}

\epstopdfDeclareGraphicsRule{.gif}{png}{.png}{convert gif:#1 png:\OutputFile}
\AppendGraphicsExtensions{.gif}

\newsavebox{\imagebox}
%\usecolortheme{}

\lstset{language=C++, basicstyle=\tiny,
                keywordstyle=\color{blue},
                stringstyle=\color{red},
                commentstyle=\color{green},
                morecomment=[l][\color{magenta}]{\#}}


%% DIAGRAMA DE BLOQUE %%
\tikzstyle{block} = [draw, rectangle, 
    minimum height=3em, minimum width=6em]
\tikzstyle{large_sum} = [draw, rectangle, 
    minimum height=2em, minimum width=12em]
\tikzstyle{reg} = [draw, rectangle, 
    minimum height=2em, minimum width=0.25em, fill=black]
\tikzstyle{square_block} = [draw, rectangle, 
    minimum height=3em, minimum width=3em]
\tikzstyle{sum} = [draw, circle, node distance=1cm]
\tikzstyle{node_input} = [draw, rectangle, minimum height=0.25em, minimum width=0.25em, fill=inputNodeColor]
\tikzstyle{node_output} = [draw, rectangle, minimum height=0.25em, minimum width=0.25em, fill=outputNodeColor]
\tikzstyle{node_clock} = [draw, rectangle, minimum height=0.25em, minimum width=0.25em, fill=clockNodeColor]

\addbibresource{references.bib}

\newcommand{\mypos}[2]{\tikz[remember picture]{\node[inner sep=0pt, anchor=base](#2){#1};}}

\title{HAWK}
\subtitle{Simuladores}
\institute{FundaciÃ³n Fulgor}
\author[]{ Venancio, Mauro N.}
\date{\today}

\begin{document}

\tikzset{slicerpic/.pic = {
\draw (-1,0) -- (1,0);
\draw (-0.7,-0.9)--(-0,-0.9) -- (0,0.9) --(0.7,0.9);
}}

\tikzset{%
  do path picture/.style={%
    path picture={%
      \pgfpointdiff{\pgfpointanchor{path picture bounding box}{south west}}%
        {\pgfpointanchor{path picture bounding box}{north east}}%
      \pgfgetlastxy\x\y%
      \tikzset{x=\x/2,y=\y/2}%
      #1
    }
  },
  sin wave/.style={do path picture={    
    \draw [line cap=round,  minimum height=3em] (-3/4,0)
      sin (-3/8,1/2) cos (0,0) sin (3/8,-1/2) cos (3/4,0);
  }},
  cross/.style={do path picture={    
    \draw [line cap=round] (-1,-1) -- (1,1) (-1,1) -- (1,-1);
  }},
  plus/.style={do path picture={    
    \draw [line cap=round] (-3/4,0) -- (3/4,0) (0,-3/4) -- (0,3/4);
  }}
}


\tikzstyle{vecArrow} = [thick, decoration={markings,mark=at position
   1 with {\arrow[semithick]{open triangle 60}}},
   double distance=1.4pt, shorten >= 5.5pt,
   preaction = {decorate},
   postaction = {draw,line width=1.4pt, white,shorten >= 4.5pt}]
\tikzstyle{innerWhite} = [semithick, white,line width=1.4pt, shorten >= 4.5pt]


\tikzset{clipper_pic/.pic = {
\draw (-1,-0.9)--(-0.5,-0.9) -- (0.5,0.9) --(1,0.9);
}}

\begin{frame}{Modules}
    \begin{figure}
        \centering
        \begin{tikzpicture}[thick,scale=0.6, every node/.style={scale=0.6}]
            %\node[node_input, label={180:i\_signal}] (i_slicer_i){};

            \node[circle, draw, sin wave, node distance = 2 cm, minimum height=3em, label=u\_sin\_gen] (sin_gen_i){};

            \node [square_block, right of=sin_gen_i, node distance=3cm, label=u\_shift\_reg] (shift_reg_i) {Shift Register};

            \node[node_clock, node distance = 1.5 cm, label={180:i\_clock}] at (-2,-2) (clock){};

            \node[node_output, right of = shift_reg_i, node distance = 2.3cm, label={0:o\_signal}] (o_shift_reg){};

            \draw[arrows=->,>=latex] (sin_gen_i) -- (shift_reg_i);

            \draw[arrows=->,>=latex] (shift_reg_i) -- (o_shift_reg);

            \draw[dotted,arrows=->,>=latex] (clock) -| (shift_reg_i);

	    \draw[dotted,arrows=->,>=latex] (clock) -| (sin_gen_i);

            % Module
            \draw [ rounded corners,dashed,postaction={draw,line width=1pt}](clock) -- ++(0,-0.75) -| (o_shift_reg) -- ++(0,1.5) -| (clock);
        \end{tikzpicture}
        \caption{TP1 connection}
        \label{fig:enter-label}
    \end{figure}


\end{frame}

\begin{frame}{Shift Register}
    \begin{figure}[h!]
        \centering
        \begin{tikzpicture}[thick,scale=0.8, every node/.style={scale=0.8}]
            \foreach \x in{1,...,4}
            {
                \node[reg] at (\x,0) (reg_\x){};
                %\draw[arrows=->,>=latex] (reg_\x) -| node[pos=0.99,label={0:\tiny h(\x)},name=prod_\x]{} ++ (0.5,-1.8);
                %\node[sum, below of = prod_\x, node distance = 1.5cm] (sum_\x){\tiny +};
                %\draw[arrows=->,>=latex] (prod_\x.center) -- (sum_\x);
            }
            \foreach [evaluate=\x as \y using int(\x+1)] \x in{1,...,3}
            {
                \draw[arrows=->,>=latex] (reg_\x) -- (reg_\y);
               % \draw[arrows=->,>=latex] (sum_\x) -- (sum_\y);
            }

            % \node[node_input] at (-1,0) (in_){};
    
            \draw[arrows=<-,>=latex] (reg_1) -- node[node_input,pos=0.99,name=input,label={180:i\_signal}]{} ++(-1.5,0);
    
            %\draw[arrows=->,>=latex] (input) -| node[pos=0.99,label={0:\tiny h(0)},name=prod_0]{} ++ (1,-1.8);
    
           % \draw[arrows=->,>=latex] (prod_0.center) |- (sum_1);

            %\node[reg, right of = sum_4, node distance = 1cm, label={90:\scriptsize{r\_out}}](output_reg){};

            %\draw[arrows=->,>=latex] (sum_4) -- (output_reg);
    
            \draw[arrows=-,>=latex] (reg_4) -- 
            node[pos=0.5,name=sat_trunc]{} node[node_output, pos=0.99,name=output,label={0:o\_signal}]{} ++(1.5,0);

            %\draw [ rounded corners,dashed,postaction={draw,line width=1pt}](0.2,-0.75) -. (4.8,-0.75) -. node[label={[label distance=1.5cm]160:\scriptsize{u\_	shift\_reg}}]{}  (4.8,0.6) -. (0.2,0.6) -. (0.2,-0.75);

            %\draw [ rounded corners,dashed,postaction={draw,line width=1pt}](0.2,-2.1) -. (5.5,-2.1) -. node[label={0:\scriptsize{coeffs}}]{} (5.5,-1.3) -. (0.2,-1.3) -. (0.2,-2.1);

            % Clock
            \node[node_clock, below of = input, node distance = 1.2 cm, label={180:i\_clock}] (clock){};

           % \draw[dotted, arrows=->,>=latex] (clock) -| node[pos=0.03,name=aux_clk_1]{} (output_reg);
             %\draw[dotted] (aux_clk_1.center) -- ++(0,3);
            \foreach \x in{1,...,4}
            {
            	\draw[dotted, arrows=->,>=latex] (clock) -| (reg_\x.south);
            }

            % Module
            \draw [ rounded corners,dashed,postaction={draw,line width=1pt}](input) -- (clock) -- ++(0,-0.5) -|  (output) -- ++(0,1) -| (input);
            
        \end{tikzpicture}
        \caption{Shift Register Module}
        \label{fig:lab_02}
    \end{figure}
\end{frame}


\end{document}
